# ğŸš— Há»† THá»NG QUáº¢N LÃ Báº¢O HÃ€NH XE ÄIá»†N OEM

Há»‡ thá»‘ng quáº£n lÃ½ báº£o hÃ nh toÃ n diá»‡n cho xe Ä‘iá»‡n OEM, há»— trá»£ quy trÃ¬nh tá»« tiáº¿p nháº­n yÃªu cáº§u báº£o hÃ nh, cháº©n Ä‘oÃ¡n, sá»­a chá»¯a, Ä‘áº¿n thanh toÃ¡n vÃ  quáº£n lÃ½ kho.

---

## ğŸ“‹ Má»¤C Lá»¤C

- [Tá»•ng quan](#-tá»•ng-quan)
- [TÃ­nh nÄƒng chÃ­nh](#-tÃ­nh-nÄƒng-chÃ­nh)
- [CÃ´ng nghá»‡ sá»­ dá»¥ng](#-cÃ´ng-nghá»‡-sá»­-dá»¥ng)
- [Cáº¥u trÃºc dá»± Ã¡n](#-cáº¥u-trÃºc-dá»±-Ã¡n)
- [YÃªu cáº§u há»‡ thá»‘ng](#-yÃªu-cáº§u-há»‡-thá»‘ng)
- [CÃ i Ä‘áº·t vÃ  Cháº¡y](#-cÃ i-Ä‘áº·t-vÃ -cháº¡y)
- [Cáº¥u hÃ¬nh](#-cáº¥u-hÃ¬nh)
- [Quy trÃ¬nh báº£o hÃ nh](#-quy-trÃ¬nh-báº£o-hÃ nh)
- [PhÃ¢n quyá»n ngÆ°á»i dÃ¹ng](#-phÃ¢n-quyá»n-ngÆ°á»i-dÃ¹ng)
- [API Documentation](#-api-documentation)
- [Testing](#-testing)
- [Deployment](#-deployment)
- [TÃ i liá»‡u tham kháº£o](#-tÃ i-liá»‡u-tham-kháº£o)

---

## ğŸ¯ Tá»”NG QUAN

Há»‡ thá»‘ng quáº£n lÃ½ báº£o hÃ nh xe Ä‘iá»‡n OEM lÃ  má»™t giáº£i phÃ¡p pháº§n má»m toÃ n diá»‡n Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ quáº£n lÃ½ toÃ n bá»™ vÃ²ng Ä‘á»i cá»§a cÃ¡c yÃªu cáº§u báº£o hÃ nh, tá»« khi khÃ¡ch hÃ ng yÃªu cáº§u Ä‘áº¿n khi hoÃ n táº¥t vÃ  Ä‘Ã³ng claim. Há»‡ thá»‘ng há»— trá»£ nhiá»u vai trÃ² ngÆ°á»i dÃ¹ng khÃ¡c nhau, tá»« nhÃ¢n viÃªn trung tÃ¢m dá»‹ch vá»¥, ká»¹ thuáº­t viÃªn, Ä‘áº¿n nhÃ¢n viÃªn EVM vÃ  quáº£n trá»‹ viÃªn.

### Äá»‘i tÆ°á»£ng sá»­ dá»¥ng

- **SC_STAFF** - NhÃ¢n viÃªn Trung tÃ¢m Dá»‹ch vá»¥
- **SC_TECHNICIAN** - Ká»¹ thuáº­t viÃªn Trung tÃ¢m Dá»‹ch vá»¥
- **EVM_STAFF** - NhÃ¢n viÃªn EVM
- **ADMIN** - Quáº£n trá»‹ viÃªn há»‡ thá»‘ng

---

## âœ¨ TÃNH NÄ‚NG CHÃNH

### ğŸ”§ Quáº£n lÃ½ Báº£o hÃ nh (Warranty Claims)
- Táº¡o vÃ  theo dÃµi yÃªu cáº§u báº£o hÃ nh
- Kiá»ƒm tra Ä‘iá»u kiá»‡n báº£o hÃ nh tá»± Ä‘á»™ng
- Quy trÃ¬nh phÃª duyá»‡t Ä‘a cáº¥p (SC â†’ EVM)
- Quáº£n lÃ½ tráº¡ng thÃ¡i claim chi tiáº¿t
- Lá»‹ch sá»­ thay Ä‘á»•i tráº¡ng thÃ¡i Ä‘áº§y Ä‘á»§

### ğŸ‘¥ Quáº£n lÃ½ KhÃ¡ch hÃ ng & Xe
- Quáº£n lÃ½ thÃ´ng tin khÃ¡ch hÃ ng
- ÄÄƒng kÃ½ vÃ  quáº£n lÃ½ xe theo VIN
- Theo dÃµi lá»‹ch sá»­ dá»‹ch vá»¥ vÃ  báº£o hÃ nh
- PhÃ¢n loáº¡i xe theo danh má»¥c

### ğŸ”© Quáº£n lÃ½ Phá»¥ tÃ¹ng & Tá»“n kho
- Quáº£n lÃ½ phá»¥ tÃ¹ng EVM vÃ  phá»¥ tÃ¹ng bÃªn thá»© 3
- Theo dÃµi tá»“n kho theo warehouse
- Quáº£n lÃ½ serial number phá»¥ tÃ¹ng
- Tá»± Ä‘á»™ng reserve phá»¥ tÃ¹ng khi claim Ä‘Æ°á»£c approve
- Cáº£nh bÃ¡o khi thiáº¿u phá»¥ tÃ¹ng

### ğŸ“‹ Quáº£n lÃ½ Work Orders
- Táº¡o vÃ  gÃ¡n work order cho technician
- Theo dÃµi tiáº¿n Ä‘á»™ sá»­a chá»¯a
- Quáº£n lÃ½ workload cá»§a technician
- QuÃ©t vÃ  ghi nháº­n S/N phá»¥ tÃ¹ng thay tháº¿

### ğŸ’³ Thanh toÃ¡n
- TÃ­ch há»£p VNPay payment gateway
- Thanh toÃ¡n cho sá»­a chá»¯a ngoÃ i báº£o hÃ nh
- Theo dÃµi tráº¡ng thÃ¡i thanh toÃ¡n

### ğŸ¤– AI-Powered Features
- TÃ­ch há»£p Google Gemini AI
- Há»— trá»£ cháº©n Ä‘oÃ¡n thÃ´ng minh
- Chatbot há»— trá»£

### ğŸ“¢ Quáº£n lÃ½ Recall Campaigns
- Táº¡o vÃ  quáº£n lÃ½ chiáº¿n dá»‹ch thu há»“i
- Theo dÃµi tiáº¿n Ä‘á»™ thu há»“i
- ThÃ´ng bÃ¡o cho khÃ¡ch hÃ ng

### ğŸ“Š BÃ¡o cÃ¡o & PhÃ¢n tÃ­ch
- Dashboard theo vai trÃ²
- BÃ¡o cÃ¡o thá»‘ng kÃª báº£o hÃ nh
- PhÃ¢n tÃ­ch hiá»‡u suáº¥t
- Export dá»¯ liá»‡u

### ğŸ¨ Giao diá»‡n ngÆ°á»i dÃ¹ng
- Thiáº¿t káº¿ hiá»‡n Ä‘áº¡i, tá»‘i giáº£n
- Há»— trá»£ Light/Dark mode
- Responsive design (mobile & desktop)
- Animations mÆ°á»£t mÃ 
- Tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng tá»‘i Æ°u

---

## ğŸ› ï¸ CÃ”NG NGHá»† Sá»¬ Dá»¤NG

### Backend
- **Framework**: Spring Boot 3.5.6
- **Language**: Java 21
- **Database**: Microsoft SQL Server 2022
- **ORM**: Spring Data JPA / Hibernate
- **Security**: Spring Security + JWT
- **API Documentation**: SpringDoc OpenAPI (Swagger)
- **Build Tool**: Maven
- **Containerization**: Docker & Docker Compose

### Frontend
- **Framework**: React 19.1.1
- **Routing**: React Router DOM 7.9.4
- **HTTP Client**: Axios 1.12.2
- **UI/UX**: 
  - CSS3 & CSS Modules
  - Framer Motion 12.23.22 (animations)
  - React Icons 5.5.0
- **Notifications**: React Toastify 11.0.5
- **3D Graphics**: Three.js & React Three Fiber (optional)

### Third-party Services
- **Payment Gateway**: VNPay
- **AI Service**: Google Gemini AI
- **Authentication**: JWT (JSON Web Tokens)

---

## ğŸ“ Cáº¤U TRÃšC Dá»° ÃN

```
OEM-EV-Warranty-Management-System/
â”œâ”€â”€ BE/                                    # Backend (Spring Boot)
â”‚   â””â”€â”€ OEM-EV-Warranty-Management-System/
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ main/
â”‚       â”‚   â”‚   â”œâ”€â”€ java/com/ev/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ warranty/
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ controller/    # REST Controllers
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ service/       # Business Logic
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ repository/    # Data Access
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ model/         # Entities & DTOs
â”‚       â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ config/        # Configuration
â”‚       â”‚   â”‚   â”‚   â”‚   â””â”€â”€ security/      # Security Config
â”‚       â”‚   â”‚   â””â”€â”€ resources/
â”‚       â”‚   â”‚       â”œâ”€â”€ application.properties
â”‚       â”‚   â”‚       â””â”€â”€ data.sql
â”‚       â”‚   â””â”€â”€ test/                      # Unit Tests
â”‚       â”œâ”€â”€ migrations/                    # Database Migrations
â”‚       â”œâ”€â”€ Postman_Test/                  # Postman Collections
â”‚       â”œâ”€â”€ docker-compose.yml
â”‚       â”œâ”€â”€ Dockerfile
â”‚       â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ FE/                                    # Frontend (React)
â”‚   â””â”€â”€ OEM-EV-Warranty-Management-System/
â”‚       â””â”€â”€ oem-ev-warranty-management-system/
â”‚           â”œâ”€â”€ src/
â”‚           â”‚   â”œâ”€â”€ components/            # React Components
â”‚           â”‚   â”‚   â”œâ”€â”€ Dashboard/         # Dashboard Pages
â”‚           â”‚   â”‚   â”œâ”€â”€ Login/
â”‚           â”‚   â”‚   â”œâ”€â”€ HomePage/
â”‚           â”‚   â”‚   â””â”€â”€ ...
â”‚           â”‚   â”œâ”€â”€ services/              # API Services
â”‚           â”‚   â”œâ”€â”€ utils/                 # Utilities
â”‚           â”‚   â””â”€â”€ hooks/                 # Custom Hooks
â”‚           â”œâ”€â”€ public/
â”‚           â”œâ”€â”€ package.json
â”‚           â””â”€â”€ README.md
â”‚
â”œâ”€â”€ WARRANTY_FLOW_EXPLANATION.md          # Chi tiáº¿t flow báº£o hÃ nh
â”œâ”€â”€ CONFIGURATION_GUIDE.md                # HÆ°á»›ng dáº«n cáº¥u hÃ¬nh
â”œâ”€â”€ DATABASE_ANALYSIS.md                  # PhÃ¢n tÃ­ch database
â”œâ”€â”€ ACTION_ITEMS.md                       # Danh sÃ¡ch cÃ´ng viá»‡c
â””â”€â”€ README.md                             # File nÃ y
```

---

## ğŸ’» YÃŠU Cáº¦U Há»† THá»NG

### Backend
- **Java**: JDK 21 hoáº·c cao hÆ¡n
- **Maven**: 3.6+ (hoáº·c sá»­ dá»¥ng Maven Wrapper)
- **Database**: SQL Server 2019+ hoáº·c SQL Server Express
- **Docker**: 20.10+ (tÃ¹y chá»n, Ä‘á»ƒ cháº¡y vá»›i Docker Compose)

### Frontend
- **Node.js**: 16.x hoáº·c cao hÆ¡n
- **npm**: 8.x hoáº·c cao hÆ¡n (hoáº·c yarn)

### Development Tools
- **IDE**: IntelliJ IDEA, Eclipse, hoáº·c VS Code
- **Database Client**: SQL Server Management Studio (SSMS) hoáº·c Azure Data Studio
- **API Testing**: Postman hoáº·c Insomnia

---

## ğŸš€ CÃ€I Äáº¶T VÃ€ CHáº Y

### 1. Clone Repository

```bash
git clone <repository-url>
cd OEM-EV-Warranty-Management-System
```

### 2. CÃ i Ä‘áº·t Database

#### Option A: Sá»­ dá»¥ng Docker Compose (Khuyáº¿n nghá»‹)

```bash
cd BE/OEM-EV-Warranty-Management-System

# Táº¡o file .env
cp .env.example .env
# Chá»‰nh sá»­a .env vÃ  Ä‘iá»n MSSQL_SA_PASSWORD

# Khá»Ÿi Ä‘á»™ng database
docker-compose up -d db db-init
```

#### Option B: CÃ i Ä‘áº·t SQL Server Local

1. Táº£i vÃ  cÃ i Ä‘áº·t [SQL Server Express](https://www.microsoft.com/sql-server/sql-server-downloads)
2. Táº¡o database:
```sql
CREATE DATABASE OEM_EV2
COLLATE SQL_Latin1_General_CP1_CI_AS;
```

### 3. Cáº¥u hÃ¬nh Backend

```bash
cd BE/OEM-EV-Warranty-Management-System

# Copy file cáº¥u hÃ¬nh máº«u
cp src/main/resources/application-sample.properties src/main/resources/application.properties

# Chá»‰nh sá»­a application.properties:
# - Cáº­p nháº­t database connection string
# - Cáº­p nháº­t JWT secret
# - Cáº­p nháº­t API keys (Gemini, VNPay)
```

Xem chi tiáº¿t trong [CONFIGURATION_GUIDE.md](./CONFIGURATION_GUIDE.md)

### 4. Cháº¡y Backend

#### Option A: Sá»­ dá»¥ng Maven Wrapper

```bash
cd BE/OEM-EV-Warranty-Management-System
./mvnw spring-boot:run
# Hoáº·c trÃªn Windows:
mvnw.cmd spring-boot:run
```

#### Option B: Sá»­ dá»¥ng IntelliJ IDEA

1. Má»Ÿ project trong IntelliJ IDEA
2. TÃ¬m file `RunApplication.java` hoáº·c class cÃ³ `@SpringBootApplication`
3. Right-click â†’ Run

#### Option C: Sá»­ dá»¥ng Docker Compose (Full Stack)

```bash
cd BE/OEM-EV-Warranty-Management-System
docker-compose up
```

Backend sáº½ cháº¡y táº¡i: **http://localhost:8080**

### 5. CÃ i Ä‘áº·t vÃ  Cháº¡y Frontend

```bash
cd FE/OEM-EV-Warranty-Management-System/oem-ev-warranty-management-system

# CÃ i Ä‘áº·t dependencies
npm install

# Cháº¡y development server
npm start
```

Frontend sáº½ cháº¡y táº¡i: **http://localhost:3000**

### 6. Truy cáº­p á»©ng dá»¥ng

- **Frontend**: http://localhost:3000
- **Backend API**: http://localhost:8080
- **Swagger UI**: http://localhost:8080/swagger-ui.html
- **API Docs**: http://localhost:8080/v3/api-docs

---

## âš™ï¸ Cáº¤U HÃŒNH

### Environment Variables

Táº¡o file `.env` trong thÆ° má»¥c `BE/OEM-EV-Warranty-Management-System/`:

```bash
# Database
MSSQL_SA_PASSWORD=YourStrong@Passw0rd

# JWT Secret (tá»‘i thiá»ƒu 32 kÃ½ tá»±)
APP_JWT_SECRET=your-generated-secret-here-min-32-chars

# Gemini AI
GEMINI_API_KEY=AIzaSy...your-key-here

# VNPay (Sandbox)
VNPAY_TMN_CODE=3LM60U0F
VNPAY_HASH_SECRET=32H3JYZG8L19NTXTPOHCWC3BW94SSMU4
VNPAY_RETURN_URL=http://localhost:8080/vnpay/return
```

### Application Properties

File `application.properties` chá»©a cÃ¡c cáº¥u hÃ¬nh chi tiáº¿t:

- Database connection
- JWT settings
- File upload settings
- CORS configuration
- Third-party service APIs

Xem chi tiáº¿t trong [CONFIGURATION_GUIDE.md](./CONFIGURATION_GUIDE.md)

---

## ğŸ”„ QUY TRÃŒNH Báº¢O HÃ€NH

Há»‡ thá»‘ng há»— trá»£ 2 flow chÃ­nh:

### 1. EVM_REPAIR (Sá»­a chá»¯a báº£o hÃ nh - dÃ¹ng phá»¥ tÃ¹ng tá»« kho EVM)

```
DRAFT/OPEN
  â†“ (Intake)
OPEN
  â†“ (Diagnostic)
PENDING_APPROVAL
  â†“ (Submit to EVM)
PENDING_EVM_APPROVAL
  â”œâ”€â†’ EVM_APPROVED â†’ READY_FOR_REPAIR â†’ REPAIR_IN_PROGRESS
  â””â”€â†’ EVM_REJECTED â†’ (Resubmit) â†’ PENDING_EVM_APPROVAL
REPAIR_IN_PROGRESS
  â†“ (Complete Repair)
FINAL_INSPECTION
  â†“ (Inspection)
READY_FOR_HANDOVER
  â†“ (Handover)
CLAIM_DONE
  â†“ (Close)
CLOSED âœ…
```

### 2. SC_REPAIR (Sá»­a chá»¯a dá»‹ch vá»¥ - khÃ¡ch hÃ ng thanh toÃ¡n)

```
OPEN
  â†“ (Diagnostic - chá»n SC_REPAIR)
CUSTOMER_PAYMENT_PENDING
  â†“ (Payment)
CUSTOMER_PAID â†’ READY_FOR_REPAIR â†’ REPAIR_IN_PROGRESS
  â†“ (Complete Repair)
FINAL_INSPECTION â†’ READY_FOR_HANDOVER â†’ CLAIM_DONE â†’ CLOSED
```

Xem chi tiáº¿t Ä‘áº§y Ä‘á»§ trong [WARRANTY_FLOW_EXPLANATION.md](./WARRANTY_FLOW_EXPLANATION.md)

---

## ğŸ‘¤ PHÃ‚N QUYá»€N NGÆ¯á»œI DÃ™NG

### SC_STAFF (NhÃ¢n viÃªn Trung tÃ¢m Dá»‹ch vá»¥)
- Quáº£n lÃ½ há»“ sÆ¡ xe vÃ  khÃ¡ch hÃ ng
- ÄÄƒng kÃ½ xe theo sá»‘ VIN
- Theo dÃµi lá»‹ch sá»­ dá»‹ch vá»¥ vÃ  báº£o hÃ nh
- Xá»­ lÃ½ yÃªu cáº§u báº£o hÃ nh (intake)
- GiÃ¡m sÃ¡t tráº¡ng thÃ¡i yÃªu cáº§u
- BÃ n giao xe cho khÃ¡ch hÃ ng

### SC_TECHNICIAN (Ká»¹ thuáº­t viÃªn)
- ÄÃ­nh kÃ¨m bÃ¡o cÃ¡o, hÃ¬nh áº£nh, cháº©n Ä‘oÃ¡n
- Thá»±c hiá»‡n sá»­a chá»¯a báº£o hÃ nh
- Cáº­p nháº­t tiáº¿n Ä‘á»™ sá»­a chá»¯a
- QuÃ©t vÃ  ghi nháº­n S/N phá»¥ tÃ¹ng
- Quáº£n lÃ½ work orders

### EVM_STAFF (NhÃ¢n viÃªn EVM)
- Quáº£n lÃ½ cÆ¡ sá»Ÿ dá»¯ liá»‡u phá»¥ tÃ¹ng EV
- PhÃª duyá»‡t/tá»« chá»‘i yÃªu cáº§u báº£o hÃ nh
- GiÃ¡m sÃ¡t chiáº¿n dá»‹ch thu há»“i
- PhÃ¢n tÃ­ch dá»¯ liá»‡u báº£o hÃ nh
- Quáº£n lÃ½ warranty policies

### ADMIN (Quáº£n trá»‹ viÃªn)
- PhÃ¢n cÃ´ng ká»¹ thuáº­t viÃªn cho cÃ¡c trÆ°á»ng há»£p
- PhÃ¢n tÃ­ch dá»¯ liá»‡u báº£o hÃ nh
- Táº¡o bÃ¡o cÃ¡o
- Quáº£n lÃ½ ngÆ°á»i dÃ¹ng vÃ  phÃ¢n quyá»n
- Quáº£n lÃ½ hoáº¡t Ä‘á»™ng ná»™i bá»™

---

## ğŸ“š API DOCUMENTATION

### Swagger UI

Khi backend Ä‘ang cháº¡y, truy cáº­p:
- **Swagger UI**: http://localhost:8080/swagger-ui.html
- **OpenAPI JSON**: http://localhost:8080/v3/api-docs

### Postman Collections

CÃ¡c Postman collections cÃ³ sáºµn trong thÆ° má»¥c:
```
BE/OEM-EV-Warranty-Management-System/Postman_Test/
â”œâ”€â”€ Postman_Complete_Test_Suite.json
â”œâ”€â”€ Postman_Warranty_Claim_Flow_Tests.json
â”œâ”€â”€ Postman_Authentication_Tests.json
â”œâ”€â”€ Postman_Customer_Management_Tests.json
â”œâ”€â”€ Postman_Inventory_Management_Tests.json
â””â”€â”€ ...
```

### CÃ¡c Endpoint chÃ­nh

| Endpoint | Method | MÃ´ táº£ | Quyá»n |
|----------|--------|-------|-------|
| `/api/auth/login` | POST | ÄÄƒng nháº­p | Public |
| `/api/claims/intake` | POST | Táº¡o claim má»›i | SC_STAFF, ADMIN |
| `/api/claims/{id}/diagnostic` | PUT | Cáº­p nháº­t cháº©n Ä‘oÃ¡n | SC_STAFF, SC_TECHNICIAN, ADMIN |
| `/api/claims/submit` | POST | Gá»­i lÃªn EVM | SC_STAFF, SC_TECHNICIAN, ADMIN |
| `/api/evm/claims/{id}/approve` | POST | EVM phÃª duyá»‡t | EVM_STAFF, ADMIN |
| `/api/evm/claims/{id}/reject` | POST | EVM tá»« chá»‘i | EVM_STAFF, ADMIN |
| `/api/claims/{id}/complete-repair` | PUT | HoÃ n táº¥t sá»­a chá»¯a | SC_TECHNICIAN, SC_STAFF, ADMIN |
| `/api/claims/{id}/final-inspection` | POST | Kiá»ƒm tra cuá»‘i | SC_STAFF, SC_TECHNICIAN, ADMIN |
| `/api/claims/{id}/handover` | POST | BÃ n giao xe | SC_STAFF, ADMIN |
| `/api/claims/{id}/close` | POST | ÄÃ³ng claim | SC_STAFF, ADMIN |

---




